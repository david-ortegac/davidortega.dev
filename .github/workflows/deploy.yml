name: Deploy to cPanel (API)

on:
  push:
    branches: ["master"]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger cPanel deploy
        uses: pinkasey/cpanel-deploy-action@v1.2.1
        with:
          hostname: ${{ secrets.CPANEL_HOSTNAME }}
          cpanel_username: ${{ secrets.CPANEL_USERNAME }}
          cpanel_token: ${{ secrets.CPANEL_TOKEN }}
          repository_root: ${{ secrets.CPANEL_REPO_ROOT }}
          updateRepository: true
          branch: master
