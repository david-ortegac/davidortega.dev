name: Deploy to cPanel (API)

on:
  push:
    branches: ["master"]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger cPanel deploy
        uses: pinkasey/cpanel-deploy-action@v1.2.1
        with:
          hostname:        ${{ secrets.CPANEL_HOSTNAME }} 
          cPanelApiPort:   2083                                # default
          cpanel_username: ${{ secrets.CPANEL_USERNAME }}      # usuario cPanel del token
          cpanel_token:    ${{ secrets.CPANEL_TOKEN }}         # token API (cPanel → Security → API Tokens)
          repository_root: ${{ secrets.CPANEL_REPO_ROOT }}     # ej. /home/USUARIO/repositories/mi_repo
          updateRepository: true
          branch:          master
