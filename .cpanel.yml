---
deployment:
  tasks:
    # Ajusta TU usuario y la carpeta fuente a publicar
    - export CPANEL_USER="davidort"
    - export SOURCE_DIR="dist/davidortega.dev/browser"   # <-- cambia aquÃ­ la carpeta a desplegar
    - export DEST="/home/${CPANEL_USER}/public_html"

    # Sincronizar: mueve todo de source_dir a dest y elimina obsoletos
    - /bin/rsync -av --delete \
        --exclude=".git*" \
        --exclude="node_modules" \
        --exclude=".env*" \
        --chmod=D755,F644 \
        "$SOURCE_DIR"/ "$DEST"/

    # (Opcional) Permisos finales
    - /bin/find "$DEST" -type d -exec chmod 755 {} \;
    - /bin/find "$DEST" -type f -exec chmod 644 {} \;
